<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Glide Bitmap Pool by amitshekhariitbhu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Glide Bitmap Pool</h1>
      <h2 class="project-tagline">Glide Bitmap Pool is a memory management library for reusing the bitmap memory</h2>
      <a href="https://github.com/amitshekhariitbhu/GlideBitmapPool" class="btn">View on GitHub</a>
      <a href="https://github.com/amitshekhariitbhu/GlideBitmapPool/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/amitshekhariitbhu/GlideBitmapPool/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="glide-bitmap-pool" class="anchor" href="#glide-bitmap-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Glide Bitmap Pool</h1>

<p><a href="http://android-arsenal.com/details/1/3740"><img src="https://img.shields.io/badge/Android%20Arsenal-Glide%20Bitmap%20Pool-blue.svg?style=flat" alt="Android Arsenal"></a>
<a href="https://github.com/amitshekhariitbhu/GlideBitmapPool/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-Apache%202.0-blue.svg" alt="License"></a></p>

<p><img src="https://raw.githubusercontent.com/amitshekhariitbhu/GlideBitmapPool/master/assets/glidebitmappool.png" width="1000" height="140"></p>

<h3>
<a id="about-glide-bitmap-pool" class="anchor" href="#about-glide-bitmap-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>About Glide Bitmap Pool</h3>

<p>Glide Bitmap Pool is a memory management library for reusing the bitmap memory. As it reuses bitmap memory , so 
no more GC calling again and again , hence smooth running application. It uses inBitmap while decoding the bitmap
on the supported android versions. All the version use-cases has been handled to optimize it better.</p>

<ul>
<li>
<a href="https://github.com/bumptech/glide">Glide</a> , <a href="https://github.com/facebook/fresco">Fresco</a> and <a href="https://github.com/amitshekhariitbhu/Android-Networking">Android Networking</a> uses Bitmap Pool Concept to 
load images efficiently.</li>
</ul>

<h3>
<a id="why-use-this-library-" class="anchor" href="#why-use-this-library-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why use this library ?</h3>

<p>An Image heavy Application decodes many images , so there will be continuous allocation and deallocation 
of memory in application , and that results in very frequent calling of GC(Garbage Collector). And 
finally because of very frequent calling of GC , the application UI freezes.
Use Bitmap pool to avoid continuous allocation and deallocation of memory in application 
and reduce GC overhead that will result in smooth running application.
Suppose we have to load few bitmap in Android Application.
When we load bitmapOne , it will allocate the memory for bitmapOne.
Then if we donâ€™t need bitmapOne , do not recycle bitmap (as if you recycle, it will make GC to be called) , 
so use this bitmapOne as an inBitmap for bitmapTwo so that , the same memory can be reused for bitmapTwo.
In this way , we can avoid continuous allocation and deallocation of memory in application and reduce GC overhead.
But the problem is that there are few restrictions as android version less than Honeycomb does not supports it , 
few android version less than Kitkat only when we use inSampleSize = 1 , above that it supports 
completely and few other issues.
So , all these types of cases are handled in this library</p>

<ul>
<li><a href="https://medium.com/@amitshekhar/how-to-use-bitmap-pool-in-android-56c71a55533c#.m41wqfk8h">Detail Explanation can be found here</a></li>
</ul>

<h4>
<a id="get-rid-of--gc_for_alloc-freed-1568k-23-free-37664k48844k-paused-141ms-total-143ms---whenever-you-see-this-log--your-application-is-lagging" class="anchor" href="#get-rid-of--gc_for_alloc-freed-1568k-23-free-37664k48844k-paused-141ms-total-143ms---whenever-you-see-this-log--your-application-is-lagging" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>GET RID OF : GC_FOR_ALLOC freed 1568K, 23% free 37664K/48844K, paused 141ms, total 143ms - (whenever you see this log , your application is lagging)</h4>

<p><img src="https://raw.githubusercontent.com/amitshekhariitbhu/GlideBitmapPool/master/assets/gcsamplelog.png" width="500" height="150"></p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<p>Glide Bitmap Pool can be included in any Android or Java application. </p>

<p>Glide Bitmap Pool supports Android 2.3 (Gingerbread) and later. </p>

<h2>
<a id="using-glide-bitmap-pool-in-your-application" class="anchor" href="#using-glide-bitmap-pool-in-your-application" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Glide Bitmap Pool in your application</h2>

<p>Add this in your build.gradle</p>

<div class="highlight highlight-source-groovy"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>com.amitshekhar.android:glide-bitmap-pool:0.0.1<span class="pl-pds">'</span></span></pre></div>

<p>Then initialize it in onCreate() Method of application class, :</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>initialize(<span class="pl-c1">10</span> <span class="pl-k">*</span> <span class="pl-c1">1024</span> <span class="pl-k">*</span> <span class="pl-c1">1024</span>); <span class="pl-c">// 10mb max memory size</span></pre></div>

<h3>
<a id="decoding-the-bitmap-from-file-path" class="anchor" href="#decoding-the-bitmap-from-file-path" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Decoding the bitmap from file path</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapFactory</span><span class="pl-k">.</span>decodeFile(filePath);</pre></div>

<h3>
<a id="decoding-the-bitmap-from-resources" class="anchor" href="#decoding-the-bitmap-from-resources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Decoding the bitmap from resources</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapFactory</span><span class="pl-k">.</span>decodeResource(getResources(), <span class="pl-smi">R</span><span class="pl-k">.</span>drawable<span class="pl-k">.</span>testImage);</pre></div>

<h3>
<a id="decoding-the-down-sample-bitmap" class="anchor" href="#decoding-the-down-sample-bitmap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Decoding the down sample bitmap</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapFactory</span><span class="pl-k">.</span>decodeFile(filePath,<span class="pl-c1">100</span>,<span class="pl-c1">100</span>);</pre></div>

<h3>
<a id="making-the-bitmap-available-for-recycle-or-reuse" class="anchor" href="#making-the-bitmap-available-for-recycle-or-reuse" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Making the bitmap available for recycle or reuse</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>putBitmap(bitmap);</pre></div>

<h3>
<a id="getting-the-empty-bitmap-from-the-pool" class="anchor" href="#getting-the-empty-bitmap-from-the-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting the empty bitmap from the pool</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>getBitmap(width, height, config);</pre></div>

<h3>
<a id="clearing-or-trimming-memory" class="anchor" href="#clearing-or-trimming-memory" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Clearing or Trimming Memory</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>clearMemory();
<span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>trimMemory(level);</pre></div>

<h3>
<a id="migrating-to-glide-bitmap-pool" class="anchor" href="#migrating-to-glide-bitmap-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Migrating to Glide Bitmap Pool</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// ------   decoding -------</span>

<span class="pl-c">// old code </span>
<span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">BitmapFactory</span><span class="pl-k">.</span>decodeResource(getResources(), <span class="pl-smi">R</span><span class="pl-k">.</span>drawable<span class="pl-k">.</span>test1);

<span class="pl-c">// new code </span>
<span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapFactory</span><span class="pl-k">.</span>decodeResource(getResources(), <span class="pl-smi">R</span><span class="pl-k">.</span>drawable<span class="pl-k">.</span>test1);

<span class="pl-c">// ------   recycling ------- </span>

<span class="pl-c">// old code</span>
bitmap<span class="pl-k">.</span>recycle();

<span class="pl-c">// new code</span>
<span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>putBitmap(bitmap);

<span class="pl-c">//  ------   creating a bitmap -------</span>

<span class="pl-c">// old code </span>
<span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">Bitmap</span><span class="pl-k">.</span>create(width, height, config);

<span class="pl-c">// new code</span>
<span class="pl-smi">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-smi">GlideBitmapPool</span><span class="pl-k">.</span>getBitmap(width, height, config);</pre></div>

<h3>
<a id="important" class="anchor" href="#important" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Important</h3>

<pre><code>// Do not use bitmap.recycle();
// use GlideBitmapPool.putBitmap(bitmap); as it will put bitmap in the pool for further reuse.

// Do not use Bitmap.create(width, height, config);
// use GlideBitmapPool.getBitmap(width, height, config); as it returns bitmap from the pool that can be reused.
</code></pre>

<h3>
<a id="credits-and-references" class="anchor" href="#credits-and-references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Credits and references</h3>

<ul>
<li>
<a href="https://github.com/bumptech/glide">Glide</a> - As it uses the same bitmap pool that is used by <a href="https://github.com/bumptech/glide">Glide</a>
</li>
<li><a href="https://developer.android.com/training/displaying-bitmaps/manage-memory.html">Managing Bitmap Memory</a></li>
<li><a href="https://developer.android.com/training/displaying-bitmaps/load-bitmap.html">Loading Large Bitmaps Efficiently</a></li>
</ul>

<h3>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODO</h3>

<ul>
<li>More Optimization with further updates.</li>
</ul>

<h3>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contact</h3>

<ul>
<li><a href="https://twitter.com/amitiitbhu">Twitter</a></li>
<li><a href="https://medium.com/@amitshekhar">Medium</a></li>
<li><a href="https://www.facebook.com/amit.shekhar.iitbhu">Facebook</a></li>
</ul>

<h3>
<a id="have-an-issue-or-need-a-feature-in-glide-bitmap-pool" class="anchor" href="#have-an-issue-or-need-a-feature-in-glide-bitmap-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Have an issue or need a feature in Glide Bitmap Pool</h3>

<ul>
<li>Best way to do so is - <a href="https://github.com/amitshekhariitbhu/GlideBitmapPool/issues/new">Create an issue</a>
</li>
</ul>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h3>

<pre><code>   Copyright (C) 2016 Amit Shekhar
   Copyright (C) 2011 Android Open Source Project

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
</code></pre>

<h3>
<a id="contributing-to-glide-bitmap-pool" class="anchor" href="#contributing-to-glide-bitmap-pool" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing to Glide Bitmap Pool</h3>

<p>Just make pull request. You are in!</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/amitshekhariitbhu/GlideBitmapPool">Glide Bitmap Pool</a> is maintained by <a href="https://github.com/amitshekhariitbhu">amitshekhariitbhu</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
